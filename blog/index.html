<!doctype html>
<html style="background-color: #f5f5f5; min-height: 100%;">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <title>Opal Blog</title>

  <link href="/assets/application-9db9bab64149be06d09e3390c1f7e70d7a98cfcf86f32f8e777c14fcac0ccb27.css" rel="stylesheet" />
  <link href="//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" />

  <script src="/assets/application-ebc9a3fff8eae3470a6b7b27753a921aceae8d2254be48253cd1e932e9081355.js" onload="Opal.loaded(typeof(OpalLoaded) === &quot;undefined&quot; ? [] : OpalLoaded);
Opal.require(&quot;application&quot;);;console.log('loaded application')"></script>

  <!-- Algolia -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
</head>
<body class="blog blog_index">
  <nav class='navbar navbar-default opal-nav' role='navigation'>
<div class='container'>
<div class='navbar-header'>
<a class='navbar-brand' href='/'>
<img height='22' src='https://secure.gravatar.com/avatar/88298620949a6534d403da2e356c9339?s=420&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-org-420.png' style='margin-top:-10%;' width='22'>
Opal
</a>
<button class='navbar-toggle' data-target='#opal-navbar' data-toggle='collapse' type='button'>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
</button>
</div>
<div class='navbar-collapse collapse' id='opal-navbar'>
<ul class='nav navbar-nav'>
<li>
<a href='/try'>
<i class='ion-ios-compose'></i>
Try
</a>
</li>
<li>
<a href='/blog'>
<i class='ion-ios-chatboxes'></i>
Blog
</a>
</li>
<li>
<a href='/docs'>
<i class='ion-ios-copy'></i>
Documentation
</a>
</li>
<li>
<a href='/libraries'>
<i class='ion-map'></i>
Libraries
</a>
</li>
<li>
<a href='https://github.com/opal/opal#readme'>
<i class='ion-social-github'></i>
GitHub
</a>
</li>
<li>
<a href='https://rubygems.org/gems/opal/versions/1.1.1' style='opacity: 0.5;'>
v1.1.1
</a>
</li>
</ul>
<ul class='nav navbar-right'>
<li class='search-bar'>
<form id='search-form'>
<input placeholder='Search docs &amp; guides' type='search'>
<button title='Clear the search query.' type='reset'>
&times;
</button>
</form>
</li>
</ul>
</div>
</div>
</nav>


  <div class="container">
    <div class='container col-sm-8'>
<div class='blog-posts'>
<div class='blog-title'>
<h1>
<a href='/blog'>The Opal Blog</a>
</h1>
</div>

<article class='blog-post'>
<header>
<h2 class='blog-post-title'>
<a href='/blog/2019/05/12/opal-1-0/'>
Opal 1.0
</a>
</h2>
<div class='blog-post-meta'>
Posted by Elia Schito on 2019-05-12
</div>
</header>
<div class='blog-post-body'>
<p>Dear Opalists of the world,&#x000A;<br>the time has come, <strong>1.0 has been released</strong>!</p>&#x000A;&#x000A;<p>This is, of course, a really important milestone, one that I&#39;ve been waiting on for about seven years. I started advocating for releasing version 1.0 back in 2012 when Opal was still at version 0.3. After all, at that time I already had code in production, and according to <a href="https://semver.org">Semver</a> (which by then was still a new thing) that&#39;s one of the criteria for releasing 1.0:</p>&#x000A;&#x000A;<blockquote>&#x000A;<p>How do I know when to release 1.0.0?</p>&#x000A;&#x000A;<p>If your software is being used in production, it should probably already be 1.0.0. If you have a stable API on which users have come to depend, you should be 1.0.0. If you‚Äôre worrying a lot about backward compatibility, you should probably already be 1.0.0.</p>&#x000A;</blockquote>&#x000A;&#x000A;<p><em><a href="https://semver.org/#how-do-i-know-when-to-release-100">https://semver.org/#how-do-i-know-when-to-release-100</a></em></p>&#x000A;&#x000A;<p><strong>I was so proud and excited about this ability to use Ruby for frontend code!</strong> I was writing the logic for an in-page product filter and Ruby allowed me to solve the problem quickly, with its signature concise syntax, and leveraging the power of enumerable. That immensely reduced the lines of code I had to write and allowed me to concentrate on just the core of the problem.</p>&#x000A;&#x000A;<p>Many years have passed, and I&#39;m even more proud of the project that Opal has become, the maturity and the feature parity with MRI is astounding, the new features that are coming in version 1.0 are even more amazing, and the roadmap ahead <strong>makes Opal one of the best choices among compile-to-JS languages</strong>.</p>&#x000A;&#x000A;<hr>&#x000A;&#x000A;<p><em>Before diving into each new feature I&#39;d like to give immense credit for the MVP of this release, namely our good <a href="https://github.com/iliabylich">Ilia Bylich</a>! Without his unrelenting work and deep understanding of Ruby, we wouldn&#39;t be where we are. Thanks man!</em> üëèüëèüëè</p>&#x000A;&#x000A;<h2 id="notable-new-features">Notable New Features</h2>&#x000A;&#x000A;<a href="/blog/2019/05/12/opal-1-0/#continue-reading">continue reading‚Ä¶</a></div>
</article>

<article class='blog-post'>
<header>
<h2 class='blog-post-title'>
<a href='/blog/2019/02/05/opal-rspec-0-7/'>
Opal-RSpec v0.7, has been finally released! ‚ú®
</a>
</h2>
<div class='blog-post-meta'>
Posted by Elia Schito on 2019-02-05
</div>
</header>
<div class='blog-post-body'>
<p>It&#39;s been a deep work of refactoring and rewriting, adding specs and updating dependencies. Huge kudos to <a href="https://github.com/wied03">@wied03</a> for the foundational work and as usual to <a href="https://github.com/iliabylich">@iliabylich</a> for the laser sharp refactoring.</p>&#x000A;&#x000A;<p><em>For a full list of changes and updated instructions please checkout the <a href="https://github.com/opal/opal-rspec/blob/master/CHANGELOG.md#071---2019-02-04">Changelog</a> and the <a href="https://github.com/opal/opal-rspec#readme">Readme</a>.</em></p>&#x000A;&#x000A;<h3 id="new-opal-rspec-command">New <code>opal-rspec</code> command</h3>&#x000A;&#x000A;<p>A new CLI executable has been added with basic functionality to aid writing and running specs. Type <code>opal-rspec -h</code> for the complete list of options.</p>&#x000A;&#x000A;<p>One notable addition is the <code>--init</code> option that will help you initialize your project with opal-rspec.</p>&#x000A;&#x000A;<h3 id="new-folder-defaults">New folder defaults üìÇ</h3>&#x000A;&#x000A;<p>With this update I&#39;m also announcing the new standard paths for opal <code>lib/</code> and <code>spec/</code> folders, which are <code>lib-opal/</code> and <code>spec-opal</code>. This will avoid the confusion about the role of the two folders and make them nicely stay near they&#39;re MRI counterparts in your editor.</p>&#x000A;&#x000A;<p>In this spirit the <code>opal-rspec</code> command and all rake tasks will look for spec files in <code>spec-opal/</code>.</p>&#x000A;&#x000A;<p><strong>Note:</strong> those defaults are intended as the current best practice to organize an Opal project.</p>&#x000A;&#x000A;<hr>&#x000A;&#x000A;<p><em>üóì More than a year has passed since the last post, if you missed Opal, that&#39;s because most of the news circulated on the <a href="https://slack.opalrb.com">Slack channel</a>, that&#39;s my fault! <strong>But rejoice! new posts are coming and the 1.0 release is around the corner</strong></em> üòÑ</p>&#x000A;&#x000A;<p><em>Link to the official chat updated on 2020/04/28.</em></p>&#x000A;</div>
</article>

<article class='blog-post'>
<header>
<h2 class='blog-post-title'>
<a href='/blog/2017/12/20/opal-0-11-0/'>
Opal 0.11.0: Parser gem, Safe navigator (&.), Random seed support, Constant lookup
</a>
</h2>
<div class='blog-post-meta'>
Posted by Elia Schito on 2017-12-20
</div>
</header>
<div class='blog-post-body'>
<p>Hello everyone!</p>&#x000A;&#x000A;<p>I&#39;m very happy to announce that after more than a year in the making Opal v0.11.0 has finally been released!</p>&#x000A;&#x000A;<p>This version is probably the last one before 1.0, it&#39;s packed with great new features, a ton of fixes and a complete reimplementation of the parser.</p>&#x000A;&#x000A;<h2 id="notable-changes-since-opal-v0-10-0">Notable Changes since Opal v0.10.0</h2>&#x000A;&#x000A;<a href="/blog/2017/12/20/opal-0-11-0/#continue-reading">continue reading‚Ä¶</a></div>
</article>

<article class='blog-post'>
<header>
<h2 class='blog-post-title'>
<a href='/blog/2016/07/19/opal-rspec-0-5/'>
Opal-RSpec 0.5: Newer RSpec version, improved Rake task, better documentation
</a>
</h2>
<div class='blog-post-meta'>
Posted by Brady Wied on 2016-07-19
</div>
</header>
<div class='blog-post-body'>
<h1 id="opal-rspec">Opal-RSpec</h1>&#x000A;&#x000A;<p>If you&#39;re a Rubyist, you know about RSpec. It&#39;s the testing framework that most of us like. RSpec&#39;s code base also happens to use a lot of features of the Ruby language, which means getting it to work on Opal is a challenge, but to some extent, we&#39;re there! Even if you&#39;re writing code in ES5/ES6, you might enjoy using RSpec as an alternative to Jasmine. Opal&#39;s native JS functionality makes that fairly easy to do.</p>&#x000A;&#x000A;<h2 id="whats-new">What&#39;s new?</h2>&#x000A;&#x000A;<p>There were 394 commits since opal-rspec 0.4.3 that covered a variety of areas:</p>&#x000A;&#x000A;<ul>&#x000A;<li>Opal itself - 30+ pull requests went into Opal 0.9 to improve RSpec&#39;s stability on Opal. This obviously benefits anyone using opal, not just opal-rspec users.</li>&#x000A;<li>RSpec specs - opal-rspec 0.5 now runs and passes 80%+ of RSpec&#39;s own specs. For the first time, limitations, including some present in prior opal-rspec versions, are documented.</li>&#x000A;<li>New versions - Base RSpec version has been upgraded to 3.1 from the 3.0 beta (we know we&#39;re still behind, but read on) and the Rake task works with Phantom JS 1.9.8 and 2.0.</li>&#x000A;<li>New features - Node runner support and improved Rake task configurability.</li>&#x000A;</ul>&#x000A;&#x000A;<h2 id="how-do-you-get-started">How do you get started?</h2>&#x000A;&#x000A;<p>First step is adding it to your <code>Gemfile</code> and <code>bundle install</code>.</p>&#x000A;<div class="highlight"><pre class="highlight ruby"><code><span class="n">gem</span> <span class="s1">'opal-rspec'</span>&#x000A;</code></pre></div>&#x000A;<p>Then you&#39;ll need to ensure, for the default config, you have at 1.9.8 of PhantomJS installed.</p>&#x000A;&#x000A;<p>Then you can start writing specs!</p>&#x000A;&#x000A;<p>Put this in <code>spec/42_spec.rb</code></p>&#x000A;<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="mi">42</span> <span class="k">do</span>&#x000A;  <span class="n">subject</span> <span class="p">{</span> <span class="mi">43</span> <span class="p">}</span>&#x000A;&#x000A;  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">eq</span> <span class="mi">43</span> <span class="p">}</span>&#x000A;<span class="k">end</span>&#x000A;</code></pre></div>&#x000A;<p>Then in your Rakefile:</p>&#x000A;<div class="highlight"><pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'opal/rspec/rake_task'</span>&#x000A;<span class="no">Opal</span><span class="o">::</span><span class="no">RSpec</span><span class="o">::</span><span class="no">RakeTask</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:default</span><span class="p">)</span>&#x000A;</code></pre></div>&#x000A;<p>After running <code>bundle exec rake</code>, you&#39;ll see:</p>&#x000A;<div class="highlight"><pre class="highlight ruby"><code><span class="no">Running</span> <span class="n">phantomjs</span> <span class="sr">/usr/</span><span class="n">local</span><span class="o">/</span><span class="n">bundle</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">opal</span><span class="o">-</span><span class="n">rspec</span><span class="o">-</span><span class="mf">0.5</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">vendor</span><span class="o">/</span><span class="n">spec_runner</span><span class="p">.</span><span class="nf">js</span> <span class="s2">"http://localhost:9999/"</span>&#x000A;<span class="no">Object</span> <span class="n">freezing</span> <span class="n">is</span> <span class="n">not</span> <span class="n">supported</span> <span class="n">by</span> <span class="no">Opal</span>&#x000A;&#x000A;<span class="o">.</span>&#x000A;&#x000A;<span class="no">Finished</span> <span class="k">in</span> <span class="mf">0.013</span> <span class="n">seconds</span> <span class="p">(</span><span class="n">files</span> <span class="n">took</span> <span class="mf">0.163</span> <span class="n">seconds</span> <span class="n">to</span> <span class="nb">load</span><span class="p">)</span>&#x000A;<span class="mi">1</span> <span class="n">example</span><span class="p">,</span> <span class="mi">0</span> <span class="n">failures</span>&#x000A;</code></pre></div>&#x000A;<p>Right off the bat, you can see at least a few things Opal doesn&#39;t like about RSpec&#39;s code base (the freeze warning), but as of opal-rspec 0.5, those are either limited to this warning message or other documented limitations.</p>&#x000A;&#x000A;<p>Formatter support works as well.</p>&#x000A;&#x000A;<p>After running <code>SPEC_OPTS=&quot;--format json&quot; bundle exec rake</code>:</p>&#x000A;<div class="highlight"><pre class="highlight plaintext"><code>Object freezing is not supported by Opal&#x000A;&#x000A;{"examples":[{"description":"should eq 43", "full_description":"42 should eq 43", "status":"passed", "file_path":"http://localhost", "line_number":9999, "run_time":0.005}], "summary":{"duration":0.013, "example_count":1, "failure_count":0, "pending_count":0}, "summary_line":"1 example, 0 failures"}&#x000A;</code></pre></div>&#x000A;<h2 id="asynchronous-testing-on-opal">Asynchronous testing on Opal</h2>&#x000A;&#x000A;<p>Since opal has a promise implementation built in, opal-rspec has some support for asynchronous testing. By default, any <code>subject</code>, <code>it</code> block, <code>before(:each)</code>, <code>after(:each)</code>, or <code>around</code> hook that returns a promise will cause RSpec to wait for promise resolution before continuing. In the <code>subject</code> case, any <code>subject</code> resolution in your specs will be against the promise result, not the promise, which should DRY up your specs.</p>&#x000A;&#x000A;<p>Example:&#x000A;Create <code>spec/async_spec.rb</code> with this content:</p>&#x000A;<div class="highlight"><pre class="highlight ruby"><code><span class="n">describe</span> <span class="s1">'async'</span> <span class="k">do</span>&#x000A;  <span class="n">subject</span> <span class="k">do</span>&#x000A;    <span class="n">promise</span> <span class="o">=</span> <span class="no">Promise</span><span class="p">.</span><span class="nf">new</span>&#x000A;    <span class="n">delay</span> <span class="mi">1</span> <span class="k">do</span>&#x000A;      <span class="n">promise</span><span class="p">.</span><span class="nf">resolve</span> <span class="mi">42</span>&#x000A;    <span class="k">end</span>&#x000A;    <span class="n">promise</span>&#x000A;  <span class="k">end</span>&#x000A;&#x000A;  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">be_a</span> <span class="no">Promise</span> <span class="p">}</span>&#x000A;  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">eq</span> <span class="mi">42</span> <span class="p">}</span>&#x000A;<span class="k">end</span>&#x000A;</code></pre></div>&#x000A;<p>Result:</p>&#x000A;<div class="highlight"><pre class="highlight plaintext"><code>Running phantomjs /usr/local/bundle/gems/opal-rspec-0.5.0/vendor/spec_runner.js "http://localhost:9999/"&#x000A;Object freezing is not supported by Opal&#x000A;&#x000A;.F.&#x000A;&#x000A;Failures:&#x000A;&#x000A;  1) async should be a kind of Promise&#x000A;     Failure/Error: Unable to find matching line from backtrace&#x000A;     Exception::ExpectationNotMetError:&#x000A;       expected 42 to be a kind of Promise&#x000A;     # ExpectationNotMetError: expected 42 to be a kind of Promise&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:4294&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:50378&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:33927&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:33950&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:33708&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:53200&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:3000&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:52274&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:52348&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:1055&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:14805&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:52554&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:52573&#x000A;     #     at http://localhost:9999/assets/opal/rspec/sprockets_runner.js:52555&#x000A;     #&#x000A;     #   Showing full backtrace because every line was filtered out.&#x000A;     #   See docs for RSpec::Configuration#backtrace_exclusion_patterns and&#x000A;     #   RSpec::Configuration#backtrace_inclusion_patterns for more information.&#x000A;&#x000A;Finished in 2.03 seconds (files took 0.156 seconds to load)&#x000A;3 examples, 1 failure&#x000A;&#x000A;Failed examples:&#x000A;&#x000A;rspec http://localhost:9999 # async should be a kind of Promise&#x000A;</code></pre></div>&#x000A;<p>The failure is because we get a number back, not a Promise.</p>&#x000A;&#x000A;<h2 id="other-new-tools-in-the-ecosystem">Other new tools in the ecosystem</h2>&#x000A;&#x000A;<h3 id="junit-teamcity-rubymine-formatter-support">JUnit &amp; TeamCity/Rubymine formatter support</h3>&#x000A;&#x000A;<p>The chances are your CI tool supports at least 1 of those. Check out <a href="https://github.com/wied03/opal-rspec-formatter">opal-rspec-formatter</a></p>&#x000A;&#x000A;<h3 id="karma-support">Karma support</h3>&#x000A;&#x000A;<p>If you want to tap into the browser runners that Karma supports but keep using Opal, you might want to check out <a href="https://github.com/wied03/karma-opal-rspec">karma-opal-rspec</a>.</p>&#x000A;&#x000A;<h2 id="work-to-be-done">Work to be done</h2>&#x000A;&#x000A;<p>As was mentioned above, we&#39;re still using RSpec 3.1, which as of this writing, is almost 1.5 years old. Due to the number of changes necessary to make RSpec Opal friendly, we cannot track with RSpec releases as fast as we would like. That said, several things we&#39;re doing should allow us to move faster in the future, including:</p>&#x000A;&#x000A;<ul>&#x000A;<li>Constantly improving Opal code base that allows more Ruby features to work out of the box.</li>&#x000A;<li>RSpec specs which helped improve Opal and allow us to easily identify far corners of RSpec&#39;s functionality.</li>&#x000A;<li>Work on arity checking is already in-progress (opal-rspec currently doesn&#39;t run with arity checking enabled). This will tease out even more issues.</li>&#x000A;</ul>&#x000A;&#x000A;<p>All of these will eventually lead to less monkey patching and more out of the box stuff that works.</p>&#x000A;&#x000A;<h2 id="how-to-help">How to help</h2>&#x000A;&#x000A;<p>Arity checking is the top priority right now. If you can assist with issues like <a href="https://github.com/opal/opal/issues/1237">this opal issue</a> that are documented on the opal-rspec <a href="https://github.com/opal/opal-rspec/issues/40">arity check issue</a>, that will help move things along.</p>&#x000A;&#x000A;<p>After that is complete, we can begin work on RSpec 3.4.</p>&#x000A;</div>
</article>

<article class='blog-post'>
<header>
<h2 class='blog-post-title'>
<a href='/blog/2016/06/23/opal-0-10/'>
Opal 0.10: Rack 2 compatibility, improved keyword argument support, better source maps, and a whole lot more
</a>
</h2>
<div class='blog-post-meta'>
Posted by Jared White on 2016-06-23
</div>
</header>
<div class='blog-post-body'>
<p>Opal is now officially on the 0.10.x release path. Thanks to all the <a href="https://github.com/opal/opal/graphs/contributors?from=2016-01-14&amp;to=2016-06-23&amp;type=c">contributors to Opal</a> who&#39;ve worked hard to make this release possible. Some highlights from the latest release:</p>&#x000A;&#x000A;<ul>&#x000A;<li>Improvements to source maps</li>&#x000A;<li>Updates to methods in Array, Enumerable, and Module for RubySpec compliance</li>&#x000A;<li>Rack v2 compatibility</li>&#x000A;<li>Support for keyword arguments as lambda parameters, as well as keyword splats</li>&#x000A;<li>Some IO enhancements to better work with Node.js</li>&#x000A;<li>Marshalling support&#x000A;<a href="/blog/2016/06/23/opal-0-10/#continue-reading">continue reading‚Ä¶</a></div>
</article>

<article class='blog-post'>
<header>
<h2 class='blog-post-title'>
<a href='/blog/2016/01/13/opal-0-9/'>
Opal 0.9: direct JS calls, console.rb, numeric updates, better reflection, and fixes aplenty
</a>
</h2>
<div class='blog-post-meta'>
Posted by Jared White on 2016-01-13
</div>
</header>
<div class='blog-post-body'>
<p>Opal is now officially on the 0.9.x release path, having just released <a href="https://github.com/opal/opal/compare/v0.8.1...v0.9.2">0.9.2</a>. Thanks to all the <a href="https://github.com/opal/opal/graphs/contributors?from=2015-04-30&amp;to=2016-01-13&amp;type=c">contributors to Opal</a>, especially over the holidays, and we&#39;re excited for what the new year will bring to the Opal community. Some highlights from the latest release:</p>&#x000A;&#x000A;<h3 id="direct-calling-of-javascript-methods">Direct calling of JavaScript methods</h3>&#x000A;&#x000A;<p>You can now make direct JavaScript method calls on native JS objects using the <code>recv.JS.method</code> syntax. Has support for method calls, final callback (as a block), property getter and setter (via <code>#[]</code> and <code>#[]=</code>), splats, JavaScript keywords (via the <code>::JS</code> module) and global functions (after <code>require &quot;js&quot;</code>).</p>&#x000A;&#x000A;<p>Some examples, first a simple method call:</p>&#x000A;<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># javascript: foo.bar()</span>&#x000A;<span class="n">foo</span><span class="o">.</span><span class="no">JS</span><span class="p">.</span><span class="nf">bar</span>&#x000A;<span class="n">foo</span><span class="o">.</span><span class="no">JS</span><span class="p">.</span><span class="nf">bar</span><span class="p">()</span>&#x000A;</code></pre></div>&#x000A;<a href="/blog/2016/01/13/opal-0-9/#continue-reading">continue reading‚Ä¶</a></div>
</article>

<article class='blog-post'>
<header>
<h2 class='blog-post-title'>
<a href='/blog/2015/02/02/opal-0-7-0/'>
Opal 0.7.0: require, kwargs, docs, testing, lots of fixes
</a>
</h2>
<div class='blog-post-meta'>
Posted by Elia Schito on 2015-02-02
</div>
</header>
<div class='blog-post-body'>
<p>It&#39;s been almost a year from our 0.6.0 release and has been an awesome time for the Opal community. Today I&#39;m proud to announce we have released v0.7.0, which comes packed with lots of good stuff and uncountable bug fixes.</p>&#x000A;&#x000A;<h3 id="require-require_relative-and-require_tree">#require #require_relative and #require_tree</h3>&#x000A;&#x000A;<p>The require system has been completely overhauled in Opal 0.7. The previous version was a rather <a href="https://github.com/opal/opal/blob/master/lib/opal/nodes/call.rb#L164-L169">smart</a> wrapper around <a href="https://github.com/sstephenson/sprockets#the-directive-processor">sprockets directives</a> but had some limitations, especially when it came to interleaving require calls and code. Some gems couldn&#39;t be compiled with Opal just for that reason.</p>&#x000A;&#x000A;<p>The new require system now relies on a module repository where each &quot;module&quot; actually corresponds to a Ruby file compiled with Opal. This means that <code>#require</code> calls aren&#39;t <em>no-ops</em> anymore.</p>&#x000A;&#x000A;<p>In addition to that <code>#require_relative</code> support has been added and for feature parity with sprockets directives we&#39;re also introducing <code>#require_tree</code>. The latter will be particularly useful to require templates.</p>&#x000A;&#x000A;<h3 id="keyword-arguments">Keyword Arguments</h3>&#x000A;&#x000A;<p>This has been a super requested feature, and thanks to <a href="https://github.com/adambeynon">Adam Beynon</a> they&#39;re now a reality. They still have some rough edges (as they did in their first CRuby/MRI incarnation) but the core is there for you all to enjoy.</p>&#x000A;&#x000A;<a href="/blog/2015/02/02/opal-0-7-0/#continue-reading">continue reading‚Ä¶</a></div>
</article>

<article class='blog-post'>
<header>
<h2 class='blog-post-title'>
<a href='/blog/2014/05/07/promises-in-opal/'>
Promises: Handling asynchronous code in Opal
</a>
</h2>
<div class='blog-post-meta'>
Posted by Adam Beynon on 2014-05-07
</div>
</header>
<div class='blog-post-body'>
<p>When using Opal, one large omission from the stdlib are Threads. This is because javascript does not have threads, which makes asyncronous programming difficult in ruby. As javascript has increased in popularity with DOM libraries and web frameworks, callback hell was the standard way to handle asynchronous events in javascript. This was also the way events were handled in Opal applications. Until now.</p>&#x000A;&#x000A;<h3 id="what-is-so-great-about-promises">What is so great about promises?</h3>&#x000A;&#x000A;<p>When looking at a simple example, the benefits of promises may not be obvious:</p>&#x000A;<div class="highlight"><pre class="highlight ruby"><code><span class="c1"># old callback method</span>&#x000A;<span class="no">HTTP</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"url"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">response</span><span class="o">|</span>&#x000A;  <span class="nb">puts</span> <span class="s2">"got response"</span>&#x000A;<span class="k">end</span>&#x000A;&#x000A;<span class="c1"># using promises</span>&#x000A;<span class="no">HTTP</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"url"</span><span class="p">).</span><span class="nf">then</span> <span class="k">do</span> <span class="o">|</span><span class="n">response</span><span class="o">|</span>&#x000A;  <span class="nb">puts</span> <span class="s2">"got response"</span>&#x000A;<span class="k">end</span>&#x000A;</code></pre></div>&#x000A;<p>Initially the method call using a <code>Promise</code> looks just a more verbose version of the standard callback approach. The benefit of promises come through when promises are chained together. The result of the <code>#then</code> call actually returns a new <code>Promise</code> instance, which will not be resolved until the result of the first block resolves itself.</p>&#x000A;&#x000A;<h4 id="callback-hell">Callback hell</h4>&#x000A;&#x000A;<p>Lets take a slightly more complex example where an initial HTTP request is made for some user details, and then a second request is made using the result of the first json response:</p>&#x000A;&#x000A;<a href="/blog/2014/05/07/promises-in-opal/#continue-reading">continue reading‚Ä¶</a></div>
</article>

</div>
</div>

  </div>

  <footer>
  <a href="/license"><i class="ion-unlocked"></i> License</a> ¬∑
  <a href="https://github.com/opal/opal/graphs/contributors"><i class="ion-fork-repo"></i> Contributors</a>
</footer>


  <script>
    document.querySelector(`a[href="${location.pathname.replace(/\/$/,'')}"]`)
      .parentElement.classList.add("active")
  </script>

  <!-- Algolia -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript">
    docsearch({
      apiKey: 'cf08db1eca77cb92ca34e24a86430bcb',
      indexName: 'opalrb',
      inputSelector: '#search-form input[type="search"]',
      debug: false // Set debug to true if you want to inspect the dropdown
    });
  </script>
</body>
</html>
